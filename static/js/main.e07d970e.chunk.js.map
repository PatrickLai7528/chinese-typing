{"version":3,"sources":["component/WordBox/index.tsx","component/WordList/index.tsx","component/Score/index.tsx","component/TypingArea/index.tsx","utils/index.ts","component/App/index.tsx","component/App/paragraph.ts","index.tsx"],"names":["WordBox","props","ref","createRef","state","value","correct","this","getRef","prevProps","prevState","snapshot","text","onCorrect","disabled","style","display","marginTop","height","width","fontSize","color","onChange","e","newValue","target","trim","setState","textAlign","PureComponent","WordList","memo","wordList","refs","map","word","index","key","push","length","current","focus","Score","beginTime","useState","duration","setDuration","useEffect","id","setInterval","moment","diff","clearInterval","toPrecision","TypingArea","setDisabled","handleKeyDown","code","window","addEventListener","removeEventListener","paragraph","setCorrect","useMemo","split","filter","str","test","isChinese","className","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e07d970e.chunk.js","sourcesContent":["import React, { createRef, PureComponent, Ref } from \"react\";\n\nexport interface IWordBoxProps {\n  getRef: (ref: Ref<HTMLInputElement>) => void;\n  text: string;\n  onCorrect: () => void;\n  disabled?: boolean;\n}\n\nexport interface IWordBoxState {\n  value: string;\n  correct: boolean;\n}\n\nexport default class WordBox extends PureComponent<\n  IWordBoxProps,\n  IWordBoxState\n> {\n  private ref: Ref<HTMLInputElement>;\n\n  public constructor(props: IWordBoxProps) {\n    super(props);\n    this.ref = createRef();\n    this.state = { value: \"\", correct: false };\n  }\n\n  public componentDidMount(): void {\n    this.props.getRef(this.ref);\n  }\n\n  public componentDidUpdate(\n    prevProps: Readonly<IWordBoxProps>,\n    prevState: Readonly<IWordBoxState>,\n    snapshot?: any\n  ): void {\n    this.props.getRef(this.ref);\n  }\n\n  public render(): React.ReactNode {\n    const { text, onCorrect, disabled } = this.props;\n    const { value, correct } = this.state;\n    return (\n      <div style={{ display: \"inline-block\", marginTop: 20 }}>\n        <div\n          style={{\n            height: 50,\n            width: 50,\n            fontSize: \"24px\",\n            color: correct ? \"red\" : \"black\"\n          }}\n        >\n          {text}\n        </div>\n        <input\n          disabled={disabled}\n          value={value}\n          onChange={e => {\n            const newValue = e.target.value.trim();\n            if (newValue === text) {\n              this.setState({\n                value: newValue,\n                correct: true\n              });\n              onCorrect();\n            } else {\n              this.setState({\n                value: newValue,\n                correct: false\n              });\n            }\n          }}\n          ref={this.ref}\n          style={{\n            height: 50,\n            width: 50,\n            fontSize: \"24px\",\n            textAlign: \"center\"\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React, { FunctionComponent, memo } from \"react\";\nimport WordBox from \"../WordBox\";\n\nexport interface IWordListProps {\n  wordList: string[];\n  onCorrect: () => void;\n  disabled: boolean;\n}\n\nconst WordList: FunctionComponent<IWordListProps> = memo(props => {\n  const { wordList, onCorrect, disabled } = props;\n  const refs: any[] = [];\n  return (\n    <>\n      {wordList.map((word, index) => (\n        <WordBox\n          disabled={disabled}\n          key={index}\n          getRef={(ref: any) => {\n            refs.push({ word, ref });\n          }}\n          text={word}\n          onCorrect={() => {\n            if (index !== wordList.length - 1) {\n              refs[index + 1].ref.current.focus();\n            }\n            onCorrect();\n          }}\n        />\n      ))}\n    </>\n  );\n});\n\nexport default WordList;\n","import React, { FunctionComponent, useEffect, useState } from \"react\";\nimport moment, { Moment } from \"moment\";\n\nexport interface IScoreProps {\n  correct: number;\n  disabled?: boolean;\n  beginTime: null | Moment;\n}\n\nconst Score: FunctionComponent<IScoreProps> = props => {\n  const { correct, beginTime, disabled } = props;\n\n  const [duration, setDuration] = useState(0);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      if (beginTime && !disabled) {\n        setDuration(moment().diff(beginTime, \"s\"));\n      }\n    });\n    return () => clearInterval(id);\n  });\n\n  return (\n    <div>\n      <div>{`速度：${(correct / (duration / 60)).toPrecision(2)}字/分鐘`}</div>\n    </div>\n  );\n};\n\nexport default Score;\n","import React, {\n  FunctionComponent,\n  memo,\n  useEffect,\n  useMemo,\n  useState\n} from \"react\";\nimport \"./main.css\";\nimport { isChinese } from \"../../utils\";\nimport WordList from \"../WordList\";\nimport Score from \"../Score\";\nimport moment, { Moment } from \"moment\";\n\nexport interface ITypingAreaProps {\n  paragraph: string;\n}\n\nlet beginTime: null | Moment = null;\n\nconst TypingArea: FunctionComponent<ITypingAreaProps> = memo(props => {\n  const [disabled, setDisabled] = useState(true);\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (e.code === \"Enter\") {\n      setDisabled(false);\n      beginTime = moment();\n    } else if (e.code === \"Escape\") {\n      setDisabled(true);\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  });\n  const { paragraph } = props;\n  const [correct, setCorrect] = useState(0);\n  const wordList = useMemo(\n    () => paragraph.split(\"\").filter(str => isChinese(str)),\n    [paragraph]\n  );\n  return (\n    <div className={\"typing-area\"}>\n      <h1>Enter開始、ESC結束</h1>\n      <Score correct={correct} beginTime={beginTime} disabled={disabled} />\n      <WordList\n        wordList={wordList}\n        onCorrect={() => setCorrect(correct + 1)}\n        disabled={disabled}\n      />\n    </div>\n  );\n});\n\nexport default TypingArea;\n","export const isChinese = (str: string): boolean => {\n  return /^[\\u4e00-\\u9fa5]+$/.test(str);\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport TypingArea from \"../TypingArea\";\nimport { paragraph } from \"./paragraph\";\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <TypingArea paragraph={paragraph} />\n    </div>\n  );\n};\n\nexport default App;\n","export const paragraph = `\n人之初，性本善；性相近，習相遠。\n苟不教，性乃遷；教之道，貴以專。\n昔孟母，擇鄰處；子不學，斷機杼。\n竇燕山，有義方；教五子，名俱揚。\n養不教，父之過；教不嚴，師之惰。\n子不學，非所宜；幼不學，老何為？\n玉不琢，不成器；人不學，不知義。\n為人子，方少時；親師友，習禮儀。\n香九齡，能溫席；孝於親，所當執。\n融四歲，能讓梨；弟於長，宜先知。\n首孝弟，次見聞；知某數，識某文。\n一而十，十而百，百而千，千而萬。\n三才者，天地人。三光者，日月星。\n三綱者，君臣義，父子親，夫婦順。\n曰春夏，曰秋冬；此四時，運不窮。\n曰南北，曰西東；此四方，應乎中。\n曰水火，木金土；此五行，本乎數。\n曰仁義，禮智信；此五常，不容紊。\n稻粱菽，麥黍稷；此六穀，人所食。\n馬牛羊，雞犬豕；此六畜，人所飼。\n曰喜怒，曰哀懼，愛惡欲，七情具。\n匏土革，木石金，絲與竹，乃八音。\n高曾祖，父而身，身而子，子而孫，\n自子孫，至玄曾；乃九族，人之倫。\n父子恩，夫婦從，兄則友，弟則恭，\n長幼序，友與朋，君則敬，臣則忠；\n此十義，人所同。\n\n凡訓蒙，須講究；詳訓詁，明句讀。\n為學者，必有初；小學終，至四書。\n論語者，二十篇；群弟子，記善言。\n孟子者，七篇止；講道德，說仁義。\n作中庸，子思筆；中不偏，庸不易。\n作大學，乃曾子；自脩齊，至平治。\n\n孝經通，四書熟；如六經，始可讀。\n詩書易，禮春秋；號六經，當講求。\n有連山，有歸藏，有周易，三易詳。\n有典謨，有訓誥，有誓命，書之奧。\n我周公，作周禮；著六官，存治體。\n大小戴，注禮記；述聖言，禮樂備。\n曰國風，曰雅頌；號四詩，當諷詠。\n詩既亡，春秋作；寓褒貶，別善惡。\n三傳者，有公羊，有左氏，有穀梁。\n經既明，方讀子；撮其要，記其事。\n五子者，有荀楊。文中子，及老莊。\n經子通，讀諸史；考世系，知終始。\n\n自羲農，至黃帝；號三皇，居上世。\n唐有虞，號二帝；相揖遜，稱盛世。\n夏有禹，商有湯，周文武，稱三王。\n夏傳子，家天下；四百載，遷夏社。\n湯伐夏，國號商；六百載，至紂亡。\n周武王，始誅紂；八百載，最長久。\n周轍東，王綱墜；逞干戈，尚游說。\n始春秋，終戰國；五霸強，七雄出。\n嬴秦氏，始兼併；傳二世，楚漢爭。\n高祖興，漢業建；至孝平，王莽篡。\n光武興，為東漢；四百年，終於獻。\n魏蜀吳，爭漢鼎；號三國，迄兩晉。\n宋齊繼，梁陳承；為南朝，都金陵。\n北元魏，分東西；宇文周，與高齊。\n迨至隋，一土宇；不再傳，失統緒。\n唐高祖，起義師；除隋亂，創國基。\n二十傳，三百載；梁滅之，國乃改。\n梁唐晉，及漢周；稱五代，皆有由。\n炎宋興，受周禪；十八傳，南北混。\n十七史，全在茲；載治亂，知興衰。\n讀史者，考實錄；通古今，若親目。\n\n口而誦，心而惟；朝於斯，夕於斯。\n昔仲尼，師項橐；古聖賢，尚勤學。\n趙中令，讀魯論；彼既仕，學且勤。\n披蒲編，削竹簡；彼無書，且知勉。\n頭懸梁，錐刺股；彼不教，自勤苦。\n如囊螢，如映雪；家雖貧，學不輟。\n如負薪，如掛角；身雖勞，猶苦卓。\n蘇老泉，二十七，始發憤，讀書籍。\n彼既老，猶悔遲；爾小生，宜早思。\n若梁灝，八十二，對大廷，魁多士。\n彼既成，眾稱異；爾小生，宜立志。\n瑩八歲，能詠詩；泌七歲，能賦碁。\n彼穎悟，人稱奇；爾幼學，當效之。\n蔡文姬，能辨琴；謝道韞，能詠吟。\n彼女子，且聰敏；爾男子，當自警。\n唐劉晏，方七歲，舉神童，作正字。\n彼雖幼，身己仕；爾幼學，勉而致；\n有為者，亦若是。\n\n犬守夜，雞司晨；苟不學，曷為人？\n蠶吐絲，蜂釀蜜；人不學，不如物。\n幼而學，壯而行；上致君，下澤民。\n揚名聲，顯父母；光於前，裕於後。\n人遺子，金滿籯；我教子，惟一經。\n勤有功，戲無益；戒之哉，宜勉力。\n`;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./component/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}